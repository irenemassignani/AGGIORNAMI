<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Risultati della ricerca - aggiornaMi</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/style2.css"/> 
</head>
<body>
    <script src="../js/script.js"></script>
    <nav class="navbar">
        <ul class="menu">
            <li class="logo-container">
                         <img src="../images/logo.png" alt="Logo AggiornaMi" class="logo"></li>    
            <li><a href="../home.html">HOME</a></li>
                <li class="hideOnMobile"><a href="#">EVENTI</a>
                <ul class="submenu">
                    <li><a href="../eventi/serate.html">Serate</a></li>
                    <li><a href="../eventi/aperitivi.html">Aperitivi</a></li>
                    <li><a href="../eventi/concerti.html">Concerti</a></li>
                    <li><a href="../eventi/weeks.html">Le "Weeks"</a></li>
                 </ul>
                 </li>
                 <li class="hideOnMobile"><a href="#">UNIVERSITÀ</a>
                 <ul class="submenu">
                    <li><a href="../uni/studio.html">Luoghi studio</a></li>
                    <li><a href="../eventi/serate.html">Serate universitarie</a></li>
                    <li><a href="../uni/gratis.html">Gratis</a></li>
                 </ul>
                 </li>
                 <li class="hideOnMobile"><a href="../others/cultura.html">CULTURA</a></li>
                 <li class="hideOnMobile"><a href="../others/info.html">INFO</a></li>
                 <li class="hideOnMobile">
                   <form class="search-form" action="cerca.html" method="get">
                     <input type="text" placeholder="Cerca..." name="q" class="search-input">
                     <button type="submit" class="search-button">
                       <img id="searchIcon" src="../images/cercas.svg" alt="Cerca" width="26" height="26">  
                                </button>
                 </form>
               </li>
               <li class="hideOnMobile">
                          <button id="themeToggle" class="theme-button" onclick="toggleTheme()" type="button">
                          <img id="themeIcon" src="../images/moon.svg" alt="Tema scuro/chiaro" width="26" height="26">
                          </button>
                          </li>
                 <li class="menu-button" onclick="showSidebar()"><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 -960 960 960" width="26px" fill="#1f1f1f"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a></li>
                </ul>

             <ul class="sidebar">
                      <li onclick=hideSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 -960 960 960" width="26px" fill="#1f1f1f"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a></li>
                      <form class="search-form" action="others/cerca.html" method="get">
                        <input type="text" placeholder="Cerca..." name="q" class="search-input">
                        <button type="submit" class="search-button">
                          <svg xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 -960 960 960" width="26px" fill="#1f1f1f"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
                        </button>
                    </form>
                      <li class="sid"><a href="#">EVENTI</a>
                        <ul class="submenu2">
                          <li><a href="eventi/serate.html">Serate</a></li> <!-- COLLEGAMENTI: cartella/nome-pagina.html, per tornare indietro aggiungi ../ davanti -->
                          <li><a href="eventi/aperitivi.html">Aperitivi</a></li>
                          <li><a href="eventi/concerti.html">Concerti</a></li>
                          <li><a href="eventi/weeks.html">Le Weeks</a></li>
                          </ul>
                      </li>
                      <li class="sid"><a href="#">UNIVERSITÀ</a>
                        <ul class="submenu2">
                          <li><a href="uni/studio.html">Luoghi e studio</a></li>
                          <li><a href="eventi/serate.html">Serate universitarie</a></li>
                          <li><a href="uni/gratis.html">Gratis</a></li>
                          </ul>
                      </li>
                      <li class="sid"><a href="others/cultura.html">CULTURA</a></li>
                      <li class="sid"><a href="others/info.html">INFO</a></li>
                      <li class="sid">
                          <button onclick="toggleTheme()" class="theme-toggle-mobile">
                          <img id="themeIconMobile" src="images/moon.svg" alt="Tema" width="26" height="26">
                          </button>
                          </li>
                        </ul>
       </nav>

    <main>
        <h1>Risultati della ricerca</h1>
        <p id="queryDisplay"></p>
        <div id="results"></div>
    </main>

    <footer>
        <p>&copy; 2025 aggiornaMi | Tutti i diritti riservati</p>
        <p>Contattaci: info@aggiornami.it</p>
        <a href="autori.html" class="no-rosa">Irene Massignani & Rebecca Bassani</a>
    </footer>

    <script>
        // Prendi la query dalla URL
        const params = new URLSearchParams(window.location.search);
        
        // Ottieni il valore del parametro "q", lo converti in minuscolo e rimuovi gli spazi ai lati
        const query = params.get("q")?.toLowerCase().trim();
    
        //  Mostra il testo della ricerca effettuata (se presente) in un elemento con id "queryDisplay"
        document.getElementById("queryDisplay").textContent = query ? `Hai cercato: "${query}"` : "Nessuna parola cercata";

        // database di contenuti
        const contenuti = [
            { titolo: "Serate universitarie", link: "../eventi/serate.html", paroleChiave: ["serate", "festa", "notte", "serata"] },
            { titolo: "Aperitivi con amici", link: "../eventi/aperitivi.html", paroleChiave: ["aperitivi", "happy hour", "aperitivo"] },
            { titolo: "Concerti in città", link: "../eventi/concerti.html", paroleChiave: ["concerti", "musica", "live"] },
            { titolo: "Le Weeks tematiche", link: "../eventi/weeks.html", paroleChiave: ["weeks", "settimana", "fashion", "design"] },
            { titolo: "Luoghi di studio", link: "../uni/studio.html", paroleChiave: ["studio", "università", "biblioteca", "bar"] },
            { titolo: "Eventi gratuiti", link: "../uni/gratis.html", paroleChiave: ["gratis", "free", "serate gratuite", "serata gratuita"] },
            { titolo: "Cultura e mostre", link: "../others/cultura.html", paroleChiave: ["cultura", "arte", "musei", "mostra", "mostre", "museo"] },
            { titolo: "Informazioni utili", link: "../others/info.html", paroleChiave: ["info", "contatti", "aiuto", "trasporto", "trasporti", "metro"] }
        ];

        // Seleziona l'elemento HTML dove verranno mostrati i risultati della ricerca
        const resultsDiv = document.getElementById("results");
         
        // Se esiste una query di ricerca
        if (query) {

            // Filtra i contenuti per trovare quelli che contengono la parola cercata nelle parole chiave
            const risultati = contenuti.filter(item =>
                item.paroleChiave.some(kw => kw.includes(query))
            );

            // Se ci sono risultati
            if (risultati.length > 0) {
                risultati.forEach(ris => {

                    // Crea un link HTML per ciascun risultato
                    const link = document.createElement("a");
                    link.href = ris.link;// URL della pagina del contenuto
                    link.textContent = ris.titolo;// Testo visibile del link
                    link.classList.add("result-link");// Aggiunge una classe CSS per lo stile

                    // Crea un contenitore (div) per il risultato e inserisce il link al suo interno
                    const div = document.createElement("div");
                    div.classList.add("result-item");// Classe per lo stile
                    div.appendChild(link);

                    // Aggiunge il risultato al contenitore dei risultati nella pagina
                    resultsDiv.appendChild(div);
                });
            } else {

                // Se non ci sono risultati, mostra un messaggio all'utente
                resultsDiv.textContent = "Nessun risultato trovato.";
            }
        }
    </script>
</body>
</html>
